\documentclass[a4paper]{book}

\input{e_demo}

\newcounter{useexternal} \setcounter{useexternal}{1} 
\ifthenelse{\value{useexternal}=1}{ \usetikzlibrary{external} \tikzexternalize }{ \newcommand{\tikzsetnextfilename}[1]{} } 


\begin{document}

\author{Laurent Claessens}
\title{The testing and demonstrative pictures}
\maketitle

\input{demo_body}


\end{document}
